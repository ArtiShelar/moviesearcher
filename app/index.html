<!DOCTYPE html>
<html ng-app="myApp">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="css/angular-material.min.css">
	<link rel="stylesheet" href="css/toast.min.css">
	<link rel="stylesheet" href="css/styles.css">

	<script src="js/lib/angular.min.js"></script>
	<script src="js/lib/angular-aria.min.js"></script>
	<script src="js/lib/angular-animate.min.js"></script>
	<script src="js/lib/angular-material.min.js"></script>
	<script src="js/lib/angular-resource.js"></script>

	<script src="js/lib/toast.min.js"></script>


	<script src="js/app.js"></script>
	<script src="js/services.js"></script> 

<script src="js/lib/dd-text-collapse.js"></script>

	<title>Buscador de películas</title>

</head>
<body>


<section class="demo-container md-whiteframe-z1" md-theme="primary-theme" ng-controller="MainController as main" >

	<md-toolbar class="demo-toolbar md-primary">
	    <div class="md-toolbar-tools">
	      <h3 class="ng-binding">Buscador de películas</h3>
	      <span flex="" class="flex"></span>
	      	<md-button class="md-raised" ng-click="resetSearch()">Reset</md-button>
			<md-button class="md-raised" ng-click="searchAll()">Mostrar todas</md-button>
			<md-button class="md-raised" ng-click="index()">Generar índice</md-button>
	    </div>
	  </md-toolbar>

	<div class="md-inline-form" ng-cloak>

		<div id="bloqueControl">
			<form id="searchForm">
				<md-content layout-padding  layout-sm="column">

					<div layout layout-sm="column">
						<md-input-container flex>
							<input ng-model="query" aria-label="busqueda" placeholder="Búsqueda general">
						</md-input-container>
						<md-input-container flex>
							<input ng-model="title" aria-label="título" placeholder="Título">
						</md-input-container>
						<md-input-container flex>
							<input ng-model="description" aria-label="descripción" placeholder="Descripción">
						</md-input-container>
						<md-input-container flex>
							<input ng-model="runtime" aria-label="duración" placeholder="Duración (minutos)">
						</md-input-container>
					</div>

					<!-- Chips para géneros y actores

					<md-input-container>
						<input ng-model="genres" aria-label="géneros" placeholder="Géneros">
					</md-input-container>
					-->
 					
					<div layout layout-sm="column">
						<div flex="10" layout layout-align="center center">
					        <span class="md-body-1">Votación mínima</span>
					    </div>
						<md-slider flex md-discrete ng-model="minVote" step="0.5" min="0" max="10" aria-label="votod mínimo"></md-slider>
						
						<div flex="10" layout layout-align="center center">
					        <span class="md-body-1">Año inicial</span>
					    </div>
						<md-slider flex md-discrete ng-model="yearInit" step="1" min="1900" max="2015" aria-label="rating"></md-slider>

						<div flex="10" layout layout-align="center center">
					        <span class="md-body-1">Año final</span>
					    </div>
						<md-slider flex md-discrete ng-model="yearEnd" step="1" min="1900" max="2015" aria-label="rating" ></md-slider>

					</div>
				</md-content>

				<md-button class="md-raised md-primary" ng-click="search()" >Buscar</md-button>
			</form>

		</div>

	 	<div layout="row" layout-sm="column" layout-align="space-around" ng-show="loading.valor">
		    <md-progress-circular md-mode="indeterminate" md-diameter="72"></md-progress-circular>
		</div> 

		<md-content class="md-padding" layout="row" layout-wrap layout-align="center start">
			<div id="movies" ng-show="movies.length">
				<h1 class="md-headline">{{movies.length}} películas encontradas</h1>

				<div ng-repeat="movie in movies" class="fade ng-binding ng-scope">
					<md-card>
				        <md-card-title>
				        <md-card-title-media ng-show="movie.urlPoster">
				            <div class="md-media-md card-media"><img src="https://image.tmdb.org/t/p/w185/{{movie.urlPoster}}" /></div>
				          </md-card-title-media>
				          <md-card-title-text>
				            <span class="md-headline">{{movie.title}} ({{movie.releaseDate}})
				            <md-button class="md-fab md-mini md-primary" aria-label="vote average">{{movie.voteAverage}}</md-button>
				            <span class="md-subhead" ng-show="movie.runtime > 0">{{movie.runtime}} min.</span>
				            </span>

				            <span dd-text-collapse dd-text-collapse-max-length="250" dd-text-collapse-text="{{movie.description}}" class="md-body-1"></span>

				            <span class="md-subhead">Géneros</span>
							<md-chips
						        ng-model="movie.genres"
						        readonly="true"></md-chips>


						    <span class="md-subhead">Director</span>
						    <div class="md-chips">
							    <div ng-repeat="director in movie.people | filter:{ type: 'DIRECTOR' }" >
								    <span class="md-chip md-readonly">
									    <span class="md-chip-content">
									    	{{director.name}}
									    </span>
							    	</span>
							    </div>
						    </div>

						    <!-- Colapsar reparto -->
						  	<span class="md-subhead">Reparto</span>
						  	<div class="md-chips">
							    <div ng-repeat="actor in movie.people | filter:{ type: 'CAST' } | limitTo: 6"  >
								    <span class="md-chip md-readonly">
									    <span class="md-chip-content">
									    	{{actor.name}}
									    </span>
							    	</span>
							    </div>
						    </div>

						    <!-- Escritores -->


				          </md-card-title-text>
				          
				        </md-card-title>
				        <md-card-actions layout="row" layout-align="end center">
				          <!-- <md-button>Action 1</md-button>
				          <md-button>Action 2</md-button> -->
				        </md-card-actions>
				      </md-card>
			      </div>

				<md-button class="float-right md-fab md-primary" aria-label="top" ng-href="#">
				  top
				</md-button>

	    	</div>
		</md-content>

		

	</div>

</section>

</body>
</html>